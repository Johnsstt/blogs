由于公司小程序迭代特别快，每次上传代码神烦，还得往钉钉群@领导，写了个伪!小程序发布命令，给有同样烦恼的开发者们提供思路。

```
流程包括： 打开小程序ide-> 键入提交信息 -> 发布体验版本 -> git 提交-> 通知钉钉群。
```

p.s  为啥是“**伪**”，就是因为微信小程序官方没有提供直接发布的命令，需要自己手动提交审核正式版。

## step 1
先是配置好你的微信ide路径和项目路径，如下： 他做的工作是先打开ide，然后打开你的项目。强烈建议先自己手动打开ide，然后不执行初始化这段函数。
因为如果是用taro开发，在打包之后他有时会丢文件，直接上传的话就太那啥了。（这里吐槽一句，win 版小程序ide太难用了！！）

![init](https://wx1.sinaimg.cn/mw690/007N1Comly1g4lncu6tdzj30sg0gpacb.jpg)

## step 2
这里贴的图省去了输入过程的代码，主要上传版本号和提交信息。因为微信公共接口没有提供获取之前上传信息的接口，
为了每次自己不手填版本号，所以直接先在git上打标，然后拿到`git tag`上最后一个tag，+1，作为新版本号。有兴趣的小伙伴可以看我的源码（在文章最后）。
同样，也是调用微信ide的命令行。

（其实这里的功能也可以写在`git hook`上，但感觉不太灵活就舍了。）

![upload](https://wx2.sinaimg.cn/mw690/007N1Comly1g4lncu6q36j30ok0d7q4w.jpg)

## 其他
附：[完整代码](https://github.com/mytac/mytac-scripts)

写的比较啰嗦，有好的建议请在下方留言~